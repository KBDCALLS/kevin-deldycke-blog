# Redirect everything to my beautiful subdomain
RewriteCond %{HTTP_HOST} !^kevin\.deldycke\.com
RewriteRule ^(.*)$ https://kevin.deldycke.com/$1

# Generic error files
ErrorDocument 404 /404-not-found/
ErrorDocument 410 /410-gone/
ErrorDocument 500 /500-error/

# Catch-all for tag-like URLs
#RedirectMatch 301 /tag/([^\/]+)/(.+)$ /tag/$1/
RedirectMatch 301 /tag/?$ /tags/
RedirectMatch 301 /category/?$ /categories/
RedirectMatch 301 /categories/?$ /categories/
RedirectMatch 301 /archives/?$ /archives/

# Content moved during Pelican exploitation
RedirectMatch 301 ^/tags.html /tags/
RedirectMatch 301 ^/categories.html /categories/
RedirectMatch 301 ^/archives.html /archives/
RedirectMatch 301 ^/static/uploads/(.*) /uploads/$1
RedirectMatch 301 ^/static/documents/(.*) /documents/$1
RedirectMatch 301 ^/mandriva-rpm-repository https://github.com/kdeldycke/mandriva-specs
RedirectMatch 301 ^/static/repository       https://github.com/kdeldycke/mandriva-specs

# Monthly-static assets are now sorted by year only
RedirectMatch 301 ^/uploads/(\d+)/\d+/(.*) /uploads/$1/$2


### WordPress redirects

# Support old WordPress URLs
RedirectMatch 301 ^/wp-content/uploads/(.*) /uploads/$1
RedirectMatch 301 ^/category/lang/en/(.*) /category/english/$1
RedirectMatch 301 ^/category/lang/fr/(.*) /category/francais/$1

# Yearly and monthly archive are no longer paginated
RedirectMatch 301 ^/(\d{4})/page/\d+/?.* /$1/
RedirectMatch 301 ^/(\d{4}/\d{2})/page/\d+/?.* /$1/

# WordPress made a distinction between RSS 1.0, RSS 2.0 and RDF feeds while Pelican doesn't
RedirectMatch 301 (.*)/feed/(rss2?|rdf)/?$ $1/feed/

# Intermediate category are gone too
RedirectMatch gone /category/lang/?$
RedirectMatch gone /category/lang/page/\d+/?$

# Paginated tags and categories are no more
RedirectMatch gone /category/(.*)/page/\d+/?$
RedirectMatch gone /tag/[^\/]+/page/\d+/?$

# Misc WordPress stuff
RedirectMatch gone /author/[^\/]+/?$
RedirectMatch gone /author/[^\/]+/page/\d+/?$
RedirectMatch gone ^/wp-(admin|content|includes)/?.*$
RedirectMatch gone ^/wp-.*\.php$


### Disqus redirects

# Links to a particular comment are no longer supported following Disqus migration
RedirectMatch 301 (.*)/comment-page-\d+/?.* $1

# Site-wide comments feeds moved to Disqus
RedirectMatch 301 ^/comments/feed(/(rss2?|rdf|atom))?/?$ https://kevin-deldycke-blog.disqus.com/latest.rss
